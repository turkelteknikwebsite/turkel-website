---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Contact - Türkel Global Stands"
  description="Contact us for exhibition stand design and production services. Get a free quote for your project."
>
  <!-- Contact Hero -->
  <section class="py-16 bg-navy text-white">
    <div class="container">
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <h1 class="text-h4 font-hanken font-medium mb-4">Contact Us</h1>
        <p class="text-body text-white/80 text-lg">
          Contact us for exhibition stand design and production information. 
          Our expert team is ready to offer you the most suitable solution.
        </p>
      </div>
    </div>
  </section>

  <!-- Contact Form & Info -->
  <section class="py-section-lg bg-white">
    <div class="container">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-16 px-4 md:px-0">
        <!-- Contact Form -->
        <div class="animate-on-scroll">
          <div class="bg-cream p-6 md:p-8 rounded-lg">
            <h2 class="text-xl md:text-h4 font-semibold text-navy mb-4 md:mb-6">Send Message</h2>
            
            <!-- Contact Form -->
            <form id="contact-form" class="space-y-4 md:space-y-6">
              <!-- Honeypot field (hidden) -->
              <input type="text" name="website" class="hidden" tabindex="-1" autocomplete="off" />
              
              <!-- Timestamp field (hidden) -->
              <input type="hidden" name="timestamp" id="timestamp" />
              
              <!-- Name -->
              <div>
                <label for="name" class="block text-body font-medium text-black mb-2">
                  Full Name <span class="text-orange">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors"
                  placeholder="Your name and surname"
                />
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="name"></div>
              </div>

              <!-- Email -->
              <div>
                <label for="email" class="block text-body font-medium text-black mb-2">
                  Email <span class="text-orange">*</span>
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors"
                  placeholder="example@email.com"
                />
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="email"></div>
              </div>

              <!-- Phone -->
              <div>
                <label for="phone" class="block text-body font-medium text-black mb-2">
                  Phone
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors"
                  placeholder="+90 5xx xxx xx xx"
                />
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="phone"></div>
              </div>

              <!-- Company -->
              <div>
                <label for="company" class="block text-body font-medium text-black mb-2">
                  Company
                </label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors"
                  placeholder="Your company name"
                />
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="company"></div>
              </div>

              <!-- Service Type -->
              <div>
                <label for="service" class="block text-body font-medium text-black mb-2">
                  Service Type
                </label>
                <select
                  id="service"
                  name="service"
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors"
                >
                  <option value="">Select service type</option>
                  <option value="stand-design">Stand Design</option>
                  <option value="national-participation">National Participation</option>
                  <option value="group-participation">Group Participation</option>
                  <option value="podium-design">Podium Design</option>
                  <option value="other">Other</option>
                </select>
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="service"></div>
              </div>

              <!-- Message -->
              <div>
                <label for="message" class="block text-body font-medium text-black mb-2">
                  Message <span class="text-orange">*</span>
                </label>
                <textarea
                  id="message"
                  name="message"
                  rows="4"
                  required
                  class="w-full px-4 py-3 border border-grey/30 rounded-lg focus:ring-2 focus:ring-orange focus:border-orange transition-colors resize-vertical"
                  placeholder="Tell us about your project..."
                ></textarea>
                <div class="error-message text-orange text-sm mt-1 hidden" data-field="message"></div>
              </div>

              <!-- Form Message -->
              <div id="form-message" class="hidden"></div>

              <!-- Submit Button -->
              <button
                type="submit"
                id="submit-btn"
                class="w-full bg-orange text-white font-semibold py-3 px-6 rounded-lg hover:bg-orange/90 transition-colors focus:ring-2 focus:ring-orange/20 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span class="submit-text">Send Message</span>
                <span class="loading-text hidden">Sending...</span>
              </button>
            </form>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="animate-on-scroll">
          <div class="space-y-6 md:space-y-8">
            <!-- Contact Info Header -->
            <div>
              <h2 class="text-xl md:text-h4 font-semibold text-navy mb-4">Contact Information</h2>
              <p class="text-body text-grey">
                You can reach us through the following channels. We are ready to provide the best service for your projects.
              </p>
            </div>

            <!-- Contact Info Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4 md:gap-6">
              <!-- Phone -->
              <div class="flex items-start space-x-3 md:space-x-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange rounded-lg flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                  </svg>
                </div>
                <div>
                  <h3 class="text-body font-semibold text-black mb-1 md:mb-2">Phone</h3>
                  <div class="space-y-1">
                    <p class="text-sm md:text-body text-grey">
                      <a href="tel:+902122842300" class="hover:text-orange transition-colors">
                        +90 (212) 284 23 00
                      </a>
                    </p>
                    <p class="text-sm md:text-body text-grey">
                      <a href="tel:+905321234567" class="hover:text-orange transition-colors">
                        +90 (532) 123 45 67
                      </a>
                    </p>
                  </div>
                </div>
              </div>

              <!-- Email -->
              <div class="flex items-start space-x-3 md:space-x-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange rounded-lg flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                  </svg>
                </div>
                <div>
                  <h3 class="text-body font-semibold text-black mb-1 md:mb-2">Email</h3>
                  <div class="space-y-1">
                    <p class="text-sm md:text-body text-grey">
                      <a href="mailto:globalstand@turkel.com.tr" class="hover:text-orange transition-colors">
                        globalstand@turkel.com.tr
                      </a>
                    </p>
                    <p class="text-sm md:text-body text-grey">
                      <a href="mailto:info@turkelglobal.com" class="hover:text-orange transition-colors">
                        info@turkelglobal.com
                      </a>
                    </p>
                  </div>
                </div>
              </div>

              <!-- Address -->
              <div class="flex items-start space-x-3 md:space-x-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange rounded-lg flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                </div>
                <div>
                  <h3 class="text-body font-semibold text-black mb-1 md:mb-2">Address</h3>
                  <p class="text-sm md:text-body text-grey leading-relaxed">
                    4.Levent Plaza, Sarıyer<br>
                    İstanbul, Turkey
                  </p>
                </div>
              </div>

              <!-- Working Hours -->
              <div class="flex items-start space-x-3 md:space-x-4">
                <div class="w-10 h-10 md:w-12 md:h-12 bg-orange rounded-lg flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 md:w-6 md:h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                </div>
                <div>
                  <h3 class="text-body font-semibold text-black mb-1 md:mb-2">Working Hours</h3>
                  <div class="space-y-1">
                    <p class="text-sm md:text-body text-grey">Monday - Friday: 09:00 - 18:00</p>
                    <p class="text-sm md:text-body text-grey">Saturday: 09:00 - 15:00</p>
                    <p class="text-sm md:text-body text-grey">Sunday: Closed</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Map -->
          <div class="mt-8">
            <h3 class="text-lg md:text-body font-semibold text-black mb-3 md:mb-4">Our Head Office Location</h3>
            <div class="rounded-lg overflow-hidden shadow-lg">
              <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3006.0123456789!2d29.0021031!3d41.094108!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14cab67eae1004f3%3A0x53319f366c2e03c9!2sT%C3%BCrkel%20Fuarc%C4%B1l%C4%B1k%20A.%C5%9E.!5e0!3m2!1str!2str!4v1694567890123!5m2!1str!2str"
                width="100%" 
                height="300" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade"
                title="Türkel Fuarcılık A.Ş. Head Office Location"
                class="w-full h-64 md:h-80 rounded-lg"
              ></iframe>
            </div>
            <p class="text-sm text-grey mt-2">
              4.Levent Plaza, Sarıyer / İstanbul
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const formMessage = document.getElementById('form-message') as HTMLElement;
    const timestampField = document.getElementById('timestamp') as HTMLInputElement;
    
    // Set initial timestamp
    timestampField.value = Date.now().toString();
    
    // Clear previous error messages
    function clearErrors() {
      const errorMessages = document.querySelectorAll('.error-message');
      errorMessages.forEach(msg => {
        msg.classList.add('hidden');
        msg.textContent = '';
      });
      formMessage.classList.add('hidden');
    }
    
    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Clear previous errors
      clearErrors();
      
      // Set loading state
      submitBtn.disabled = true;
      submitBtn.querySelector('.submit-text')?.classList.add('hidden');
      submitBtn.querySelector('.loading-text')?.classList.remove('hidden');
      
      try {
        // Get form data
        const formData = new FormData(form);
        const data: Record<string, any> = Object.fromEntries(formData.entries());
        
        // Add timestamp
        data.timestamp = parseInt(timestampField.value);
        
        // Send request
        const response = await fetch('/api/mail', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });
        
        const result = await response.json();
        
        if (result.ok) {
          // Success
          formMessage.className = 'p-4 rounded-lg bg-green-50 border border-green-200 text-green-800';
          formMessage.textContent = result.message;
          formMessage.classList.remove('hidden');
          
          // Reset form
          form.reset();
          timestampField.value = Date.now().toString();
          
          // Scroll to message
          formMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          // Error
          formMessage.className = 'p-4 rounded-lg bg-red-50 border border-red-200 text-red-800';
          formMessage.textContent = result.error || 'An error occurred.';
          formMessage.classList.remove('hidden');
          
          // Show field-specific errors
          if (result.details) {
            result.details.forEach((error: any) => {
              const fieldError = document.querySelector(`[data-field="${error.path[0]}"]`);
              if (fieldError) {
                fieldError.textContent = error.message;
                fieldError.classList.remove('hidden');
              }
            });
          }
        }
      } catch (error) {
        // Network error
        formMessage.className = 'p-4 rounded-lg bg-red-50 border border-red-200 text-red-800';
        formMessage.textContent = 'Connection error. Please try again later.';
        formMessage.classList.remove('hidden');
      } finally {
        // Reset loading state
        submitBtn.disabled = false;
        submitBtn.querySelector('.submit-text')?.classList.remove('hidden');
        submitBtn.querySelector('.loading-text')?.classList.add('hidden');
      }
    });
  });
</script>
